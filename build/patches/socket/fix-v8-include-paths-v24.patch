# Fix V8 include paths for Node.js v24.9.0
#
# Node.js v24.9.0 source has incorrect include paths in V8 code
# Files are looking for 'src/base/hashmap.h' when it should be 'base/hashmap.h'
# This patch removes the incorrect 'src/' prefix from V8 internal includes
#
# This issue causes build failures with errors like:
#   fatal error: 'src/base/hashmap.h' file not found
#
# Author: Socket CLI
# Date: 2024-10-09
# Node versions affected: v24.9.0

--- deps/v8/src/ast/ast-value-factory.h
+++ deps/v8/src/ast/ast-value-factory.h
@@ -30,7 +30,7 @@

 #include <forward_list>

-#include "src/base/hashmap.h"
+#include "base/hashmap.h"
 #include "src/base/logging.h"
 #include "src/common/globals.h"
 #include "src/execution/isolate.h"
--- deps/v8/src/heap/new-spaces-inl.h
+++ deps/v8/src/heap/new-spaces-inl.h
@@ -12,7 +12,7 @@
 #include "src/heap/incremental-marking.h"
 #include "src/heap/new-spaces.h"
 #include "src/heap/paged-spaces-inl.h"
-#include "src/heap/spaces-inl.h"
+#include "heap/spaces-inl.h"
 #include "src/objects/objects-inl.h"
 #include "src/objects/tagged-impl.h"

--- deps/v8/src/heap/factory-inl.h
+++ deps/v8/src/heap/factory-inl.h
@@ -14,7 +14,7 @@
 #include "src/handles/handles-inl.h"
 #include "src/heap/factory-base-inl.h"
 #include "src/heap/factory.h"
-#include "src/heap/factory-base-inl.h"
+#include "heap/factory-base-inl.h"
 #include "src/heap/heap-inl.h"
 #include "src/numbers/conversions.h"
 #include "src/objects/feedback-cell.h"
--- deps/v8/src/objects/js-objects-inl.h
+++ deps/v8/src/objects/js-objects-inl.h
@@ -19,7 +19,7 @@
 #include "src/objects/feedback-cell-inl.h"
 #include "src/objects/field-index-inl.h"
 #include "src/objects/fixed-array-inl.h"
-#include "src/objects/hash-table-inl.h"
+#include "objects/hash-table-inl.h"
 #include "src/objects/heap-number-inl.h"
 #include "src/objects/js-array-inl.h"
 #include "src/objects/js-objects.h"
--- deps/v8/src/heap/cppgc/heap-page.h
+++ deps/v8/src/heap/cppgc/heap-page.h
@@ -9,7 +9,7 @@
 #include <iterator>
 #include <memory>

-#include "src/base/iterator.h"
+#include "base/iterator.h"
 #include "src/base/macros.h"
 #include "src/heap/cppgc/globals.h"
 #include "src/heap/cppgc/heap-object-header.h"